<!DOCTYPE html>
<html lang="de">

<head>
    <meta charset="UTF-8">
    <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>TaskForce Pro</title>

    <!-- Google Fonts - Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">

    <!-- Stylesheets -->
    <link rel="stylesheet" href="modern-theme.css">
    <link rel="stylesheet" href="professional-forms.css">
    <link rel="stylesheet" href="calendar-voice.css">
    <link rel="stylesheet" href="calibration.css">
    <link rel="stylesheet" href="mobile-night.css">
    <link rel="stylesheet" href="mobile-nav.css">
    <link rel="stylesheet" href="mobile-sidebar.css">
    <link rel="stylesheet" href="mobile-fixes.css">
    <link rel="stylesheet" href="mobile-button-fix.css">
    <link rel="stylesheet" href="mobile-menu-fab.css">
    <link rel="stylesheet" href="hero-cards.css">
    <link rel="stylesheet" href="mobile-optimize.css">
    <link rel="stylesheet" href="mobile-optimizations.css">
    <link rel="stylesheet" href="button-toolbar.css">
    <link rel="stylesheet" href="styles/tasks-table.css">
    <link rel="stylesheet" href="private_styles.css">
    <link rel="stylesheet" href="blinking.css">
    <!-- Leaflet Map -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
        integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
        integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.2/dist/confetti.browser.min.js"></script>
    <script src="https://www.paypal.com/sdk/js?client-id=test&currency=EUR"></script>
</head>

<body>

    <!-- LOGIN OVERLAY -->
    <div id="loginOverlay" class="hidden"
        style="position:fixed; inset:0; background: #000; z-index:9999; display:flex; align-items:center; justify-content:center; flex-direction:column;">
        <div style="text-align:center; max-width: 400px; width:100%; padding:20px;">
            <i data-lucide="zap" size="64" class="text-primary" style="margin-bottom: 20px;"></i>
            <h1 style="font-size: 2.5rem; margin-bottom: 10px;">TaskForce</h1>
            <p class="text-muted" style="margin-bottom: 30px;">Dein Team Productivity OS.</p>

            <div class="card"
                style="background: rgba(25, 25, 25, 0.9); border:1px solid var(--border); text-align: left; padding:25px;">

                <!-- Toggle -->
                <div style="display:flex; margin-bottom:20px; border-bottom:1px solid var(--border);">
                    <button id="tabLogin" class="btn"
                        style="flex:1; border-radius:0; border-bottom:2px solid var(--primary); color:white;"
                        onclick="app.auth.switchTab('login')">Anmelden</button>
                    <button id="tabRegister" class="btn"
                        style="flex:1; border-radius:0; border-bottom:2px solid transparent; color:var(--text-muted);"
                        onclick="app.auth.switchTab('register')">Registrieren</button>
                </div>

                <!-- Fields -->
                <div id="authFormBody">
                    <div class="form-group">
                        <label class="form-label">Name</label>
                        <input type="text" id="authName" class="form-input" placeholder="Dein Nutzername">
                    </div>

                    <div class="form-group">
                        <label class="form-label">Passwort</label>
                        <input type="password" id="authPass" class="form-input" placeholder="Geheimcode">
                    </div>

                    <div id="authPassRepeatField" class="form-group hidden">
                        <label class="form-label">Passwort wiederholen</label>
                        <input type="password" id="authPassRepeat" class="form-input" placeholder="Best√§tigen">
                    </div>

                    <div id="authTeamField" class="form-group hidden">
                        <label class="form-label">Team Name (Sync-Key)</label>
                        <input type="text" id="authTeam" class="form-input" placeholder="z.B. 'Familie'">
                        <p class="text-muted text-sm" style="margin-top:5px;">Nutze den gleichen Namen wie dein
                            Team-Partner.</p>
                    </div>

                    <div id="teamToggleContainer" class="form-group"
                        style="display:flex; align-items:center; gap:10px; margin-bottom:15px; cursor:pointer;"
                        onclick="app.auth.toggleTeamField()">
                        <input type="checkbox" id="useTeamSync" style="width:20px; height:20px; cursor:pointer;">
                        <label style="cursor:pointer; font-size:0.9rem;">Mit Team verbinden (Sync) ü§ù</label>
                    </div>

                    <button id="authActionBtn" class="btn btn-primary"
                        style="width: 100%; justify-content: center; padding: 15px; font-size: 1.1rem; margin-top:10px;"
                        onclick="app.auth.submit()">Anmelden üöÄ</button>
                </div>
            </div>
            <p class="text-muted text-sm" style="margin-top:20px;">Alle Daten werden lokal verschl√ºsselt.</p>
        </div>
    </div>

    <div id="app-layout">
        <!-- Sidebar Overlay (Mobile) -->
        <div class="sidebar-overlay" onclick="app.toggleSidebar()"></div>

        <!-- Desktop Sidebar -->
        <nav class="sidebar" id="mainSidebar">
            <!-- Sidebar Clock -->
            <div class="sidebar-clock">
                <div id="clockTimeSidebar">--:--</div>
                <div id="clockDateSidebar">Wird geladen...</div>
            </div>

            <div class="logo-area" style="margin-bottom: 20px;">
                <i data-lucide="zap" class="logo-icon" size="24"></i>
                <h2 style="font-size: 1.2rem;">TaskForce</h2>
                <button class="icon-btn" style="margin-left:auto; display:none;" onclick="app.toggleSidebar()"
                    id="sidebarCloseBtn"><i data-lucide="x"></i></button>
            </div>

            <!-- Gamification Profile Tiny -->
            <div class="user-profile-widget"
                style="margin-bottom: 2rem; padding: 10px; background: rgba(255,255,255,0.05); border-radius: 12px;">
                <div style="display:flex; justify-content: space-between; align-items: center; margin-bottom: 5px;">
                    <span class="text-sm" style="font-weight: 600;">Level <span id="userLevel">1</span></span>
                    <span class="text-sm text-muted"><span id="userXP">0</span> XP</span>
                </div>
                <div class="level-bar-container">
                    <div id="sidebarLevelBar" class="level-bar-fill" style="width: 0%"></div>
                </div>
            </div>

            <div id="cat-general" class="nav-category">Planen</div>
            <a id="nav-dashboard" class="nav-item active" data-page="dashboard"><i data-lucide="layout-dashboard"></i>
                Dashboard</a>
            <a id="nav-calendar" class="nav-item" data-page="calendar"><i data-lucide="calendar"></i> Kalender</a>

            <div id="cat-business" class="nav-category">Business OS</div>
            <a id="nav-projects" class="nav-item" data-page="projects"
                onclick="app.navigateTo('dashboard'); setTimeout(() => document.getElementById('dashboardProjectsCard').scrollIntoView({behavior:'smooth'}), 100)"><i
                    data-lucide="briefcase"></i> Projekte</a>
            <a id="nav-contacts" class="nav-item" data-page="contacts"><i data-lucide="user-circle-2"></i> Kontakte
                (CRM)</a>
            <a id="nav-finance" class="nav-item" data-page="finance"><i data-lucide="wallet"></i> Finanzen</a>
            <a id="nav-meetings" class="nav-item" data-page="meetings"
                onclick="app.navigateTo('dashboard'); setTimeout(() => document.getElementById('dashboardMeetingsCard').scrollIntoView({behavior:'smooth'}), 100)"><i
                    data-lucide="users-2"></i> Meetings</a>
            <a id="nav-drive" class="nav-item" data-page="drive"><i data-lucide="car"></i> Fahrt-Modus</a>
            <a id="nav-team" class="nav-item" data-page="team"><i data-lucide="users"></i> Team Planer</a>

            <div id="cat-private" class="nav-category">Privat</div>
            <a id="nav-tasks" class="nav-item" data-page="tasks"><i data-lucide="check-square"></i> Aufgaben & To-Do</a>
            <a id="nav-habits" class="nav-item" data-page="habits"><i data-lucide="flame"></i> Gewohnheiten</a>
            <a id="nav-household" class="nav-item" data-page="household"
                onclick="app.navigateTo('dashboard'); setTimeout(() => document.getElementById('dashboardHouseholdCard').scrollIntoView({behavior:'smooth'}), 100)"><i
                    data-lucide="home"></i> Haushalt</a>
            <a id="nav-shopping" class="nav-item" data-page="shopping"><i data-lucide="shopping-cart"></i> Einkauf</a>
            <a id="nav-health" class="nav-item" data-page="health"><i data-lucide="heart-pulse"></i> Gesundheit</a>
            <a id="nav-alarms" class="nav-item" onclick="app.modals.open('setAlarm')"><i data-lucide="alarm-clock"></i>
                Wecker</a>
            <a id="nav-tools" class="nav-item" data-page="tools"><i data-lucide="grid"></i> Tools</a>

            <div style="margin-top: auto;">

                <a id="menuSupportItem" class="nav-item" onclick="app.modals.open('upgradePro')">
                    <i data-lucide="heart" class="text-danger"></i> Support & Pro
                </a>
                <a class="nav-item" data-page="settings"><i data-lucide="settings"></i> Einstellungen</a>
                <a class="nav-item" style="color:var(--danger);" onclick="app.auth.logout()"><i
                        data-lucide="log-out"></i> Abmelden</a>
            </div>
        </nav>

        <!-- Main Content -->
        <main class="main-content" id="mainContent">
            <!-- Header -->
            <header class="top-bar">
                <div class="top-left-actions" style="display: flex; align-items: center; gap: 10px; flex: 1;">
                    <button class="mobile-menu-toggle" onclick="app.toggleSidebar()" style="flex-shrink: 0;">
                        <i data-lucide="menu"></i>
                        <span style="font-size: 24px; position:absolute; opacity:0; pointer-events:none;">‚ò∞</span>
                    </button>
                    <!-- Dashboard Mode Switcher -->
                    <div class="dash-mode-switcher"
                        style="display: flex; background: rgba(255,255,255,0.05); padding: 4px; border-radius: 20px; border: 1px solid rgba(255,255,255,0.1); margin-right: 10px;">
                        <button id="btnModeBusiness" class="mode-btn active" onclick="app.dashboard.setMode('business')"
                            style="padding: 6px 15px; border-radius: 16px; border: none; background: var(--primary); color: white; cursor: pointer; font-size: 0.8rem; font-weight: 600; display: flex; align-items: center; gap: 6px; transition: all 0.3s;">
                            <i data-lucide="briefcase" size="14"></i> Business
                        </button>
                        <button id="btnModePrivate" class="mode-btn" onclick="app.dashboard.setMode('private')"
                            style="padding: 6px 15px; border-radius: 16px; border: none; background: transparent; color: var(--text-muted); cursor: pointer; font-size: 0.8rem; font-weight: 600; display: flex; align-items: center; gap: 6px; transition: all 0.3s;">
                            <i data-lucide="user" size="14"></i> Privat
                        </button>
                    </div>

                    <!-- Top Smart Command Bar -->
                    <div class="top-command-field" id="smartSearchContainer"
                        onclick="this.classList.add('active'); document.getElementById('smartInput').focus();"
                        title="Was tun? (Suche)">
                        <i data-lucide="search" class="search-icon-trigger" size="18"></i>
                        <input type="text" id="smartInput" placeholder="Was tun?"
                            onkeypress="if(event.key==='Enter') { if(app.smartCommand(this.value)) this.value=''; }"
                            onblur="setTimeout(() => { if (!this.value) document.getElementById('smartSearchContainer').classList.remove('active'); }, 200)">
                        <button onclick="event.stopPropagation(); app.voice.startGlobal()" title="Sprachbefehl"
                            style="position: absolute; right: 8px; background: none; border: none; color: white; opacity: 0.6; cursor: pointer; padding: 5px; display: flex; align-items: center; justify-content: center;">
                            <i data-lucide="mic" size="16"></i>
                        </button>
                    </div>
                </div>
                <div class="top-actions">
                    <button class="icon-btn" title="AI Assistant" onclick="app.modals.open('aiChat')"><i
                            data-lucide="sparkles" class="text-accent"></i></button>
                    <!-- Redundant search button removed -->
                    <div id="headerSyncIndicator" class="sync-badge" title="Offline"
                        style="opacity: 0.4; display:flex; align-items:center; gap:5px; background: rgba(255,255,255,0.05); padding: 5px 10px; border-radius: 20px; margin-right: 10px; border: 1px solid rgba(255,255,255,0.1);">
                        <div style="width:8px; height:8px; background: var(--success); border-radius: 50%;"></div>
                        <span id="syncStatusHeader"
                            style="font-size: 0.7rem; font-weight: 600; text-transform: uppercase; letter-spacing: 0.5px;">Offline</span>
                    </div>
                    <button class="icon-btn" title="Benachrichtigungen relative"><i data-lucide="bell"></i><span
                            class="badg"
                            style="position: absolute; top:8px; right:8px; width:8px; height:8px; background:var(--danger); border-radius:50%;"></span></button>
                    <div class="user-avatar" id="headerUserAvatar"
                        style="width: 40px; height: 40px; background: grey; border-radius: 50%; overflow: hidden; position: relative;">
                        <img src="https://api.dicebear.com/7.x/avataaars/svg?seed=Felix" alt="User">
                    </div>
                </div>
            </header>

            <!-- Views Container -->
            <div id="viewsContainer">

                <!-- DASHBOARD VIEW -->
                <div id="view-dashboard" class="view-section">

                    <!-- HERO SECTION AT THE VERY TOP -->
                    <div class="hero-clock-card" style="margin: -20px -20px 20px -20px; border-radius: 0 0 30px 30px;">
                        <div class="hero-clock-container">
                            <div class="clock-large" id="heroClockTime">--:--</div>
                            <div class="clock-details">
                                <div class="day-of-week" id="heroClockDay">LADEN...</div>
                                <div class="date-row">
                                    <span class="date-main" id="heroClockDate">--.--. ----</span>
                                </div>
                            </div>
                        </div>
                        <hr class="hero-divider">
                        <div class="hero-footer">
                            <div class="weather-brief" id="heroWeather">
                                <i data-lucide="cloud-sun" size="18"></i> 22¬∞C
                            </div>
                            <button onclick="app.settings.toggleLayoutQuick()"
                                style="background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.2); color: white; padding: 6px 12px; border-radius: 20px; cursor: pointer; display: flex; align-items: center; gap: 6px; font-size: 0.75rem; transition: all 0.2s;"
                                onmouseover="this.style.background='rgba(255,255,255,0.1)'; this.style.borderColor='rgba(255,255,255,0.4)'"
                                onmouseout="this.style.background='rgba(255,255,255,0.05)'; this.style.borderColor='rgba(255,255,255,0.2)'"
                                title="Layout wechseln">
                                <i data-lucide="layout-grid" size="14" id="layoutToggleIcon"></i>
                                <span id="layoutToggleText">2 Spalten</span>
                            </button>
                            <button onclick="app.modals.open('configureWidgets')"
                                style="background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.2); color: white; padding: 6px 12px; border-radius: 20px; cursor: pointer; display: flex; align-items: center; gap: 6px; font-size: 0.75rem; transition: all 0.2s;"
                                onmouseover="this.style.background='rgba(255,255,255,0.1)'; this.style.borderColor='rgba(255,255,255,0.4)'"
                                onmouseout="this.style.background='rgba(255,255,255,0.05)'; this.style.borderColor='rgba(255,255,255,0.2)'"
                                title="Widgets konfigurieren">
                                <i data-lucide="layers" size="14"></i>
                                <span>Widgets</span>
                            </button>
                            <div class="status-pill">
                                <span class="status-dot"></span> System bereit
                            </div>
                        </div>
                    </div>



                    <div class="dashboard-grid">



                        <div id="dashboardCommunicationCard" class="card dash-card card-communication card-medium"
                            style="grid-column: span 2; order: 10;" draggable="true">
                            <div class="card-header" onclick="app.navigateTo('contacts')"
                                style="cursor:pointer; margin-bottom: 12px;">
                                <span class="card-title"><i data-lucide="message-square" class="text-primary"></i>
                                    Kommunikation</span>
                                <i data-lucide="chevron-right" size="16" class="text-muted"></i>
                            </div>
                            <div class="comm-grid">
                                <button class="comm-tile phone" onclick="app.comms.call()">
                                    <div class="tile-circle"><i data-lucide="phone" size="20"></i></div>
                                    <span>Telefon</span>
                                </button>
                                <button class="comm-tile whatsapp" onclick="app.comms.whatsapp()">
                                    <div class="tile-circle"><i data-lucide="message-circle" size="20"></i></div>
                                    <span>WhatsApp</span>
                                </button>
                                <button class="comm-tile email" onclick="app.comms.email()">
                                    <div class="tile-circle"><i data-lucide="mail" size="20"></i></div>
                                    <span>E-Mail</span>
                                </button>
                                <button class="comm-tile" onclick="app.navigateTo('contacts')"
                                    style="background:rgba(59, 130, 246, 0.05);">
                                    <div class="tile-circle"><i data-lucide="book-user" size="20"
                                            class="text-primary"></i></div>
                                    <span>Adressbuch</span>
                                </button>
                            </div>
                        </div>

                        <!-- NEW CONTACTS WIDGET -->
                        <div id="dashboardContactsCard" class="card dash-card card-medium"
                            style="grid-column: span 2; order: 11; max-height: 400px; overflow-y: auto;"
                            draggable="true">
                            <div class="card-header">
                                <span class="card-title"><i data-lucide="users" class="text-info"></i> Kontakte</span>
                                <button class="btn-small" onclick="app.modals.open('addContact')"><i
                                        data-lucide="plus"></i></button>
                            </div>
                            <!-- Filter for Widget -->
                            <div style="display:flex; gap:5px; margin-bottom:10px;">
                                <button class="btn-small" onclick="app.contacts.filterContactsWidget('all')"
                                    style="flex:1;">Alle</button>
                                <button class="btn-small" onclick="app.contacts.filterContactsWidget('private')"
                                    style="flex:1;">Privat</button>
                                <button class="btn-small" onclick="app.contacts.filterContactsWidget('business')"
                                    style="flex:1;">Business</button>
                            </div>
                            <!-- 2-Column Grid for Contacts -->
                            <div id="dashboardContactsPreview"
                                style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                                <!-- Contact Cards -->
                            </div>
                        </div>

                        <div id="dashboardSearchCard" class="card dash-card card-medium"
                            style="grid-column: span 2; order: 15; background: linear-gradient(135deg, rgba(30,30,30,0.8), rgba(10,10,10,0.95));"
                            draggable="true">
                            <div class="card-header" style="margin-bottom: 15px;">
                                <span class="card-title"><i data-lucide="scan-search" class="text-primary"></i> Business
                                    Search</span>
                            </div>
                            <div style="display:flex; flex-direction:column; gap:12px;">
                                <div style="position:relative;">
                                    <input type="text" id="googleSearchInput"
                                        placeholder="Was suchst du? (z.B. IT Service)"
                                        onkeypress="if(event.key==='Enter') app.businessSearch.perform(this.value)"
                                        style="width:100%; padding:12px 40px 12px 12px; border-radius:12px; border:1px solid rgba(255,255,255,0.1); background:rgba(0,0,0,0.3); color:white; outline:none;">
                                    <i data-lucide="search" size="14"
                                        style="position:absolute; right:12px; top:14px; opacity:0.4;"></i>
                                </div>
                                <button class="btn btn-primary"
                                    onclick="app.businessSearch.perform(document.getElementById('googleSearchInput').value)"
                                    style="width:100%; height:44px; border-radius:12px;">
                                    <i data-lucide="globe"></i> Google Suche
                                </button>
                                <button class="btn-small" onclick="app.modals.open('importBusiness')"
                                    style="width:100%; background:rgba(255,255,255,0.03); border:1px solid rgba(255,255,255,0.05); border-radius:10px; height:36px; padding:0;">
                                    <i data-lucide="sparkles" size="14"></i> Website Import
                                </button>
                            </div>
                        </div>

                        <div id="dashboardStatusCard" class="card dash-card card-medium"
                            style="grid-column: span 2; background: rgba(255, 255, 255, 0.03); border-left: 2px solid var(--border); display: flex; align-items: center; gap: 15px; cursor: pointer; order: 20;"
                            onclick="app.modals.open('dailyStatus')" draggable="true">
                            <div
                                style="background: rgba(255, 255, 255, 0.05); width: 45px; height: 45px; border-radius: 12px; display: flex; align-items: center; justify-content: center;">
                                <i data-lucide="clipboard-check" size="24"></i>
                            </div>
                            <div style="flex: 1;">
                                <div style="font-weight: 700; font-size: 1.1rem;">Tages-Check</div>
                                <div class="text-muted text-xs" id="statusSummaryText">Bereit f√ºr den Check</div>
                            </div>
                        </div>

                        <!-- 2.5 AI INSIGHTS -->
                        <div id="dashboardAiCard" class="card dash-card card-medium"
                            style="grid-column: span 2; padding: 15px; order: 25; border-left: 2px solid var(--accent); background: linear-gradient(135deg, rgba(234, 179, 8, 0.05) 0%, rgba(255,255,255,0.02) 100%);"
                            draggable="true">
                            <div class="card-header" style="margin-bottom: 10px;">
                                <span class="card-title" style="display:flex; align-items:center; gap:8px;">
                                    <i data-lucide="sparkles" class="text-accent" size="18"></i>
                                    <span>AI Assistant</span>
                                </span>
                                <button onclick="app.ai.analyzeState()" class="btn btn-primary"
                                    style="padding: 6px 14px; font-size: 0.8rem; display: flex; align-items: center; gap: 6px;">
                                    <i data-lucide="play" size="14"></i> Analyse starten
                                </button>
                            </div>
                            <div id="aiInsightsList" style="font-size: 0.9rem; line-height: 1.5;">
                                <div class="text-muted text-sm">Klicke auf <i data-lucide="refresh-cw" size="12"
                                        style="display:inline;"></i>, um deine Daten zu analysieren.</div>
                            </div>
                        </div>

                        <!-- 3. HERO: Termine (Consolidated Window) -->
                        <div class="card dash-card card-medium" id="dashboardEventsCard"
                            style="grid-column: span 2; padding: 12px; order: 30;" draggable="true">
                            <div class="card-header" style="margin-bottom: 12px;">
                                <span class="card-title"
                                    style="font-size: 0.85rem; color: var(--text-muted); font-weight: 700; letter-spacing: 1px;">DEIN
                                    ZEITPLAN</span>
                                <button class="btn-small"
                                    style="background: rgba(255,255,255,0.1); border-radius: 50%; width:24px; height:24px; display:flex; align-items:center; justify-content:center;"
                                    onclick="app.modals.open('addEvent')"><i data-lucide="plus" size="14"></i></button>
                            </div>
                            <!-- Filter Tabs -->
                            <div style="display:flex; gap:8px; margin-bottom:12px; flex-wrap:wrap;">
                                <button class="btn btn-secondary" id="dashboardFilterAllBtn"
                                    onclick="app.calendar.dashboardFilter('all');"
                                    style="background:var(--primary); font-size:0.85rem; padding:6px 12px;">Alle</button>
                                <button class="btn btn-secondary" id="dashboardFilterTodayBtn"
                                    onclick="app.calendar.dashboardFilter('today');"
                                    style="font-size:0.85rem; padding:6px 12px;">Heute</button>
                                <button class="btn btn-secondary" id="dashboardFilterPrivateBtn"
                                    onclick="app.calendar.dashboardFilter('private');"
                                    style="font-size:0.85rem; padding:6px 12px;">Privat</button>
                                <button class="btn btn-secondary" id="dashboardFilterBusinessBtn"
                                    onclick="app.calendar.dashboardFilter('business');"
                                    style="font-size:0.85rem; padding:6px 12px;">Business</button>
                            </div>
                            <div id="dashboardEventsPreview" style="display:flex; flex-direction:column;">
                                <!-- Filled by JS (Consolidated View) -->
                            </div>
                        </div>

                        <!-- 4. TASKS & EINKAUF (Parallel) -->
                        <div id="dashboardTasksCard" class="card dash-card card-mini"
                            style="grid-column: span 1; order: 100;"
                            onclick="app.tasks.filter('todo'); app.navigateTo('tasks')" draggable="true">
                            <div class="card-header">
                                <span class="card-title"><i data-lucide="check-square" class="text-secondary"></i>
                                    To-Do</span>
                                <button class="btn-small"
                                    onclick="event.stopPropagation(); app.modals.open('addTask')"><i
                                        data-lucide="plus"></i></button>
                            </div>
                            <div id="dashboardTaskPreview"></div>
                        </div>

                        <div id="dashboardShoppingCard" class="card dash-card card-mini"
                            style="grid-column: span 1; order: 101;"
                            onclick="app.tasks.filter('shopping'); app.navigateTo('tasks')" draggable="true">
                            <div class="card-header">
                                <span class="card-title"><i data-lucide="shopping-cart" class="text-success"></i>
                                    Einkauf</span>
                                <button class="btn-small"
                                    onclick="event.stopPropagation(); app.modals.open('addTask', { category: 'shopping' })"><i
                                        data-lucide="plus"></i></button>
                            </div>
                            <div id="dashboardShoppingPreview"></div>
                        </div>

                        <!-- 5. GESUNDHEIT & HABITS (Tracking) -->
                        <div class="card dash-card card-mini" style="grid-column: span 1; order: 37;"
                            id="dashboardHealthCard" draggable="true">
                            <div class="card-header">
                                <span class="card-title"><i data-lucide="heart"></i> Vitalit√§t</span>
                                <button onclick="event.stopPropagation(); app.navigateTo('health');"
                                    style="background: rgba(255, 255, 255, 0.1); border: 1px solid var(--border); border-radius: 50%; width: 32px; height: 32px; display: flex; align-items: center; justify-content: center;"
                                    title="Gesundheit Details"><i data-lucide="more-horizontal" size="16"></i></button>
                            </div>
                            <div id="dashboardHealthPreview"></div>
                        </div>

                        <div id="dashboardHabitsCard" class="card dash-card card-mini"
                            style="grid-column: span 1; order: 38;" onclick="app.navigateTo('habits')" draggable="true">
                            <div class="card-header">
                                <span class="card-title"><i data-lucide="flame"></i> Routinen</span>
                            </div>
                            <div id="dashboardHabitsPreview"></div>
                        </div>

                        <!-- 6. FINANZEN & WECKER (Utilities) -->
                        <div id="dashboardFinanceCard" class="card dash-card card-medium"
                            style="grid-column: span 2; order: 39;" onclick="app.navigateTo('finance')"
                            draggable="true">
                            <div class="card-header">
                                <span class="card-title"><i data-lucide="pie-chart" class="text-danger"></i>
                                    Finanzen</span>
                            </div>
                            <div style="background: rgba(255,255,255,0.03); padding: 12px; border-radius: 12px;">
                                <div
                                    style="display: flex; justify-content: space-between; margin-bottom: 8px; font-size: 0.85rem;">
                                    <span class="text-muted">√úbrig:</span>
                                    <span id="dashFinRemaining"
                                        style="font-weight: bold; color: var(--success);">0‚Ç¨</span>
                                </div>
                                <div
                                    style="width: 100%; background: rgba(255,255,255,0.1); height: 6px; border-radius: 3px; overflow: hidden;">
                                    <div id="dashFinBudgetBar"
                                        style="width: 0%; height: 100%; background: var(--success); transition: width 0.5s;">
                                    </div>
                                </div>
                                <div class="hidden" id="dashFinBudget">2000</div>
                            </div>
                        </div>

                        <div class="card dash-card card-medium" style="grid-column: span 2; order: 104;"
                            id="dashboardAlarmsCard" onclick="app.modals.open('setAlarm')" draggable="true">
                            <div class="card-header">
                                <span class="card-title"><i data-lucide="alarm-clock" class="text-secondary"></i>
                                    Wecker</span>
                                <button class="btn-small"
                                    onclick="event.stopPropagation(); app.modals.open('editAlarm', { addNew: true })"><i
                                        data-lucide="plus"></i></button>
                            </div>
                            <div id="dashboardAlarmsPreview"></div>
                        </div>

                        <!-- 7. BOTTOM TOOLS: Drive & Apps Pay -->
                        <div id="dashboardDriveCard" class="card dash-card card-mini"
                            style="grid-column: span 2; order: 51;" onclick="app.actions.toggleDriveMode()"
                            draggable="true">
                            <div style="display:flex; align-items:center; gap:12px;">
                                <div
                                    style="background:rgba(255, 255, 255, 0.05); width:42px; height:42px; border-radius:12px; display:flex; align-items:center; justify-content:center;">
                                    <i data-lucide="navigation" size="20"></i>
                                </div>
                                <div>
                                    <div style="font-weight:700;">Drive Mode</div>
                                    <div class="text-muted text-xs">Fahr-Assistent</div>
                                </div>
                            </div>
                        </div>

                        <div id="dashboardShortcutsCard" class="card dash-card card-medium"
                            style="grid-column: span 2; order: 180;" draggable="true">
                            <div class="card-header">
                                <span class="card-title"><i data-lucide="layers" class="text-primary"></i> Apps &
                                    Links</span>
                                <button class="btn-small" onclick="app.shortcuts.add()"><i
                                        data-lucide="plus"></i></button>
                            </div>
                            <div id="dashboardShortcutsPreview"
                                style="display: grid; grid-template-columns: repeat(auto-fill, minmax(60px, 1fr)); gap: 10px; margin-top: 10px;">
                                <!-- Shortcuts will be rendered here -->
                            </div>
                        </div>

                        <!-- NEW BUSINESS PRODUCTIVITY CARDS -->

                        <!-- Time Tracker Card -->
                        <div id="dashboardTimeTrackerCard" class="card dash-card card-medium"
                            style="grid-column: span 2; order: 21; background: linear-gradient(135deg, rgba(16, 185, 129, 0.05), rgba(5, 150, 105, 0.02));"
                            draggable="true">
                            <div class="card-header">
                                <span class="card-title"><i data-lucide="clock" class="text-success"></i>
                                    Zeit-Tracker</span>
                                <button class="btn-small" id="timeTrackerToggle" onclick="app.timeTracker.toggle()"
                                    style="background: rgba(16, 185, 129, 0.1); border: 1px solid rgba(16, 185, 129, 0.3);">
                                    <i data-lucide="play" size="14"></i>
                                </button>
                            </div>
                            <div id="timeTrackerDisplay" style="text-align: center; padding: 10px 0;">
                                <div
                                    style="font-size: 2rem; font-weight: 700; color: #10b981; font-family: 'Courier New', monospace;">
                                    00:00:00</div>
                                <div class="text-muted text-sm" id="timeTrackerTask">Bereit zum Starten</div>
                                <div class="text-muted text-xs" id="timeTrackerToday" style="margin-top: 8px;">Heute: 0h
                                    0m</div>
                            </div>
                        </div>

                        <!-- Quick Notes Card -->
                        <div id="dashboardNotesCard" class="card dash-card card-medium"
                            style="grid-column: span 2; order: 105; background: linear-gradient(135deg, rgba(251, 191, 36, 0.05), rgba(245, 158, 11, 0.02));"
                            draggable="true">
                            <div class="card-header">
                                <span class="card-title"><i data-lucide="sticky-note" class="text-accent"></i>
                                    Notizen</span>
                                <button class="btn-small" onclick="app.quickNotes.add()">
                                    <i data-lucide="plus" size="14"></i>
                                </button>
                            </div>
                            <div id="quickNotesPreview" style="max-height: 120px; overflow-y: auto;">
                                <div class="text-muted text-sm" style="padding: 10px; text-align: center;">Keine Notizen
                                </div>
                            </div>
                        </div>

                        <!-- Projects Card - PROFESSIONAL UPGRADE -->
                        <div id="dashboardProjectsCard" class="card dash-card card-medium"
                            style="grid-column: span 2; order: 40; background: linear-gradient(135deg, rgba(139, 92, 246, 0.08), rgba(124, 58, 237, 0.03)); border-left: 3px solid #8b5cf6;"
                            draggable="true">
                            <div class="card-header" style="margin-bottom: 15px;">
                                <div style="display: flex; align-items: center; gap: 10px;">
                                    <div
                                        style="background: rgba(139, 92, 246, 0.15); width: 40px; height: 40px; border-radius: 12px; display: flex; align-items: center; justify-content: center;">
                                        <i data-lucide="briefcase" style="color: #8b5cf6;" size="20"></i>
                                    </div>
                                    <div>
                                        <span class="card-title"
                                            style="font-size: 1.1rem; font-weight: 700;">Projekt-Management</span>
                                        <div class="text-muted text-xs" id="projectsStats">0 Aktiv ‚Ä¢ 0 Abgeschlossen
                                        </div>
                                    </div>
                                </div>
                                <div style="display: flex; gap: 8px;">
                                    <button class="btn-small" onclick="app.projects.showAll()"
                                        style="background: rgba(139, 92, 246, 0.1); border: 1px solid rgba(139, 92, 246, 0.3);">
                                        <i data-lucide="list" size="14"></i>
                                    </button>
                                    <button class="btn-small" onclick="app.projects.add()"
                                        style="background: rgba(139, 92, 246, 0.2); border: 1px solid rgba(139, 92, 246, 0.4);">
                                        <i data-lucide="plus" size="14"></i>
                                    </button>
                                </div>
                            </div>
                            <div id="projectsPreview" style="display: flex; flex-direction: column; gap: 10px;">
                                <div class="text-muted text-sm" style="padding: 20px; text-align: center;">
                                    <i data-lucide="folder-open" size="32"
                                        style="opacity: 0.3; margin-bottom: 10px;"></i>
                                    <div>Keine aktiven Projekte</div>
                                    <div class="text-xs" style="opacity: 0.6; margin-top: 5px;">Starte dein erstes
                                        Projekt!</div>
                                </div>
                            </div>
                        </div>

                        <!-- Meeting Notes Card - PROFESSIONAL UPGRADE -->
                        <div id="dashboardMeetingsCard" class="card dash-card card-medium"
                            style="grid-column: span 2; order: 60; background: linear-gradient(135deg, rgba(236, 72, 153, 0.08), rgba(219, 39, 119, 0.03)); border-left: 3px solid #ec4899;"
                            draggable="true">
                            <div class="card-header" style="margin-bottom: 15px;">
                                <div style="display: flex; align-items: center; gap: 10px;">
                                    <div
                                        style="background: rgba(236, 72, 153, 0.15); width: 40px; height: 40px; border-radius: 12px; display: flex; align-items: center; justify-content: center;">
                                        <i data-lucide="users-2" style="color: #ec4899;" size="20"></i>
                                    </div>
                                    <div>
                                        <span class="card-title"
                                            style="font-size: 1.1rem; font-weight: 700;">Meeting-Protokolle</span>
                                        <div class="text-muted text-xs" id="meetingsStats">0 Meetings ‚Ä¢ 0 Action Items
                                        </div>
                                    </div>
                                </div>
                                <div style="display: flex; gap: 8px;">
                                    <button class="btn-small" onclick="app.meetings.showAll()"
                                        style="background: rgba(236, 72, 153, 0.1); border: 1px solid rgba(236, 72, 153, 0.3);">
                                        <i data-lucide="calendar-days" size="14"></i>
                                    </button>
                                    <button class="btn-small" onclick="app.meetings.add()"
                                        style="background: rgba(236, 72, 153, 0.2); border: 1px solid rgba(236, 72, 153, 0.4);">
                                        <i data-lucide="plus" size="14"></i>
                                    </button>
                                </div>
                            </div>
                            <div id="meetingsPreview" style="display: flex; flex-direction: column; gap: 10px;">
                                <div class="text-muted text-sm" style="padding: 20px; text-align: center;">
                                    <i data-lucide="calendar-x" size="32"
                                        style="opacity: 0.3; margin-bottom: 10px;"></i>
                                    <div>Keine Meeting-Protokolle</div>
                                    <div class="text-xs" style="opacity: 0.6; margin-top: 5px;">Dokumentiere dein
                                        n√§chstes Meeting!</div>
                                </div>
                            </div>
                        </div>


                        <!-- HOUSEHOLD CARD (Private Only) -->
                        <div id="dashboardHouseholdCard" class="card dash-card card-medium"
                            style="grid-column: span 2; order: 120; background: linear-gradient(135deg, rgba(34, 197, 94, 0.05), rgba(21, 128, 61, 0.02)); display:none;"
                            draggable="true">
                            <div class="card-header">
                                <span class="card-title"><i data-lucide="home" class="text-success"></i> Haushalt</span>
                                <button class="btn-small" onclick="app.modals.open('householdAdd')">
                                    <i data-lucide="plus" size="14"></i>
                                </button>
                            </div>
                            <div id="dashboardHouseholdPreview" style="padding: 10px 0;">
                                <div class="text-muted text-sm" style="text-align: center;">Keine anstehenden Aufgaben
                                </div>
                            </div>
                        </div>

                        <!-- MEAL PLAN CARD (Private Only) -->
                        <div id="dashboardMealPlanCard" class="card dash-card card-medium"
                            style="grid-column: span 2; order: 130; background: linear-gradient(135deg, rgba(234, 179, 8, 0.05), rgba(202, 138, 4, 0.02)); display:none;"
                            onclick="app.modals.open('viewMealPlan')" draggable="true">
                            <div class="card-header">
                                <span class="card-title"><i data-lucide="utensils" class="text-accent"></i>
                                    Wochenmen√º</span>
                                <button class="btn-small"
                                    onclick="event.stopPropagation(); app.modals.open('viewMealPlan')">
                                    <i data-lucide="chevron-right" size="14"></i>
                                </button>
                            </div>
                            <div id="dashboardMealPlanPreview" style="padding: 10px 0;">
                                <div id="todayMealText"
                                    style="font-weight: 600; text-align: center; margin-bottom: 5px;">Heute: --</div>
                                <div class="text-muted text-xs" style="text-align: center;">Klicke f√ºr Wochenplan</div>
                            </div>
                        </div>

                        <!-- PRIVATE DRIVE MODE CARD (Private Only) -->
                        <div id="dashboardPrivateDriveCard" class="card dash-card card-medium"
                            style="grid-column: span 2; order: 135; display:none;"
                            onclick="app.actions.toggleDriveMode()" draggable="true">
                            <div style="display:flex; align-items:center; gap:12px;">
                                <div
                                    style="background:rgba(59, 130, 246, 0.1); width:42px; height:42px; border-radius:12px; display:flex; align-items:center; justify-content:center;">
                                    <i data-lucide="car" size="20" class="text-primary"></i>
                                </div>
                                <div>
                                    <div style="font-weight:700;">Privater Drive Mode</div>
                                    <div class="text-muted text-xs">Fahrt-Assistent f√ºr private Termine</div>
                                </div>
                            </div>
                        </div>

                        <div id="dashboardAppCardsContainer" style="display: contents;"></div>
                    </div>
                </div>

                <!-- TASKS VIEW - PROFESSIONAL UPGRADE -->
                <div id="view-tasks" class="view-section hidden">
                    <div class="card-header" style="margin-bottom: 20px;">
                        <h1 style="margin-bottom: 5px;">Aufgaben</h1>
                        <button class="btn-primary" onclick="app.modals.open('addTask')">
                            <i data-lucide="plus"></i>
                        </button>
                    </div>

                    <!-- Inline Add Task Form -->
                    <div
                        style="background:rgba(255,255,255,0.03); padding:15px; border-radius:16px; margin-bottom:20px; display:flex; gap:10px; border:1px solid rgba(255,255,255,0.05);">
                        <input type="text" id="inlineTaskInput" class="form-input" placeholder="Neue Aufgabe..."
                            style="background:transparent; border:none; padding:0; height:auto; font-size:1.1rem;"
                            onkeypress="if(event.key === 'Enter') app.tasks.addInline()">
                        <button class="btn-primary" onclick="app.tasks.addInline()"
                            style="border-radius:12px; width:48px; flex-shrink:0;"><i
                                data-lucide="arrow-up"></i></button>
                    </div>

                    <!-- Tasks Table -->
                    <div class="tasks-table-container">
                        <!-- Table Body -->
                        <div id="taskListContainer">
                            <!-- Tasks will be rendered here -->
                        </div>
                    </div>
                </div>

                <!-- TEAM VIEW (New) -->
                <div id="view-team" class="view-section hidden">
                    <div class="card-header">
                        <h1>Team Planer</h1>
                        <button class="btn-primary" onclick="app.modals.open('addTeamMember')"><i
                                data-lucide="user-plus"></i> Mitglied</button>
                    </div>
                    <p class="text-muted">Synchronisiere Aufgaben und Projekte mit deinem Team.</p>

                    <!-- Team Members List -->
                    <div class="card" style="margin-top:20px;">
                        <h3>Dein Team</h3>
                        <div id="teamMembersList" style="display:flex; flex-wrap:wrap; gap:10px; margin-top:15px;">
                            <!-- Injected JS -->
                            <span class="text-muted text-sm">Noch keine Teammitglieder.</span>
                        </div>
                    </div>

                    <!-- Shared Tasks Mockup -->
                    <div class="card" style="margin-top:20px;">
                        <h3><i data-lucide="share-2"></i> Geteilte Aufgaben</h3>
                        <div id="teamTasksList" style="margin-top:10px; display:flex; flex-direction:column; gap:10px;">
                            <!-- Mock tasks -->
                        </div>
                    </div>
                </div>

                <!-- SHOPPING VIEW (New Separate View) -->
                <div id="view-shopping" class="view-section hidden">
                    <div class="card-header" style="margin-bottom: 20px;">
                        <div>
                            <h1 style="margin-bottom: 5px; color: var(--success);">Einkauf & Besorgungen</h1>
                            <p class="text-muted text-sm" style="margin: 0;">Alles f√ºr deinen Einkauf</p>
                        </div>
                        <div style="display:flex; gap:10px;">
                            <button class="btn" onclick="app.modals.open('viewMealPlan')"
                                style="background:rgba(34, 197, 94, 0.1); border:1px solid rgba(34, 197, 94, 0.2); color:white;">
                                <i data-lucide="utensils"></i> Wochenplan
                            </button>
                            <button class="btn-primary" onclick="app.modals.open('addTask', { category: 'shopping' })"
                                style="background: var(--success);">
                                <i data-lucide="plus"></i> Einkauf hinzuf√ºgen
                            </button>
                        </div>
                    </div>

                    <!-- Filter Tabs (Shopping Only) -->
                    <div class="tabs"
                        style="display:flex; gap:10px; margin-bottom: 20px; overflow-x:auto; padding-bottom:5px;">
                        <button class="btn shopping-filter-btn active" data-filter="shopping"
                            style="background:rgba(34, 197, 94, 0.2); border: 1px solid rgba(34, 197, 94, 0.3); white-space:nowrap;"
                            onclick="app.shopping.filter('shopping')">
                            <i data-lucide="shopping-cart" size="14"></i> Offen
                        </button>
                        <button class="btn shopping-filter-btn" data-filter="urgent"
                            style="background:rgba(255,255,255,0.05); white-space:nowrap;"
                            onclick="app.shopping.filter('urgent')">
                            <i data-lucide="flame" size="14"></i> Dringend
                        </button>
                    </div>

                    <!-- Shopping List Table -->
                    <div class="card">
                        <div id="shoppingListContainer" style="display: flex; flex-direction: column; gap: 8px;">
                            <!-- Shopping Items will be rendered here -->
                        </div>
                    </div>
                </div>

                <!-- HABITS VIEW -->
                <div id="view-habits" class="view-section hidden">
                    <div class="card-header">
                        <h1>Gewohnheiten</h1>
                        <button class="btn-primary" onclick="app.habits.add()"><i data-lucide="plus"></i>
                            Neu</button>
                    </div>
                    <div class="dashboard-grid" id="habitsGrid">
                        <!-- Habits Cards injected here -->
                    </div>
                </div>

                <!-- CALENDAR VIEW -->
                <div id="view-calendar" class="view-section hidden">
                    <div class="card-header">
                        <h1>Kalender</h1>
                        <div style="display:flex; gap:10px;">
                            <button class="btn-secondary" onclick="app.voice.startGlobal()" title="Sprachbefehl"><i
                                    data-lucide="mic"></i></button>
                            <button class="btn-primary" onclick="app.modals.open('addEvent')"><i data-lucide="plus"></i>
                                Termin</button>
                        </div>
                    </div>

                    <!-- Category Filter -->
                    <div style="display:flex; gap:10px; margin-bottom:20px; flex-wrap:wrap;">
                        <button class="btn btn-secondary" id="filterAllBtn"
                            onclick="app.calendar.filterByCategory('all'); this.style.background='var(--primary)'; document.getElementById('filterPrivateBtn').style.background=''; document.getElementById('filterBusinessBtn').style.background='';"
                            style="background:var(--primary);">Alle</button>
                        <button class="btn btn-secondary" id="filterPrivateBtn"
                            onclick="app.calendar.filterByCategory('private'); this.style.background='var(--primary)'; document.getElementById('filterAllBtn').style.background=''; document.getElementById('filterBusinessBtn').style.background='';">Privat</button>
                        <button class="btn btn-secondary" id="filterBusinessBtn"
                            onclick="app.calendar.filterByCategory('business'); this.style.background='var(--primary)'; document.getElementById('filterAllBtn').style.background=''; document.getElementById('filterPrivateBtn').style.background='';">Business</button>
                    </div>

                    <div class="card" style="max-width: 1200px; margin: 0 auto;">
                        <div class="calendar-header" style="margin-bottom: 20px;">
                            <div style="display:flex; gap:10px; align-items:center; justify-content: space-between;">
                                <button class="btn-primary" onclick="app.calendar.changeMonth(-1)"><i
                                        data-lucide="chevron-left"></i></button>
                                <h2 id="calMonthDisplay" style="margin:0; flex:1; text-align:center;">Januar 2026
                                </h2>
                                <button class="btn-primary" onclick="app.calendar.changeMonth(1)"><i
                                        data-lucide="chevron-right"></i></button>
                            </div>
                        </div>

                        <!-- Day Headers -->
                        <div
                            style="display:grid; grid-template-columns: repeat(7, 1fr); text-align:center; padding-bottom:10px; border-bottom:2px solid var(--border); font-weight:600; margin-bottom:10px;">
                            <div>Mo</div>
                            <div>Di</div>
                            <div>Mi</div>
                            <div>Do</div>
                            <div>Fr</div>
                            <div>Sa</div>
                            <div>So</div>
                        </div>

                        <!-- Calendar Grid -->
                        <div id="calendarGrid" class="calendar-grid">
                            <!-- Days injected by JS -->
                        </div>
                    </div>
                </div>

                <!-- TOOLS VIEW (Replaced Health placeholder with general Tools Grid) -->
                <div id="view-tools" class="view-section hidden">
                    <h1>Tools & Extras</h1>
                    <div class="dashboard-grid">
                        <div class="card" onclick="app.nightstand.toggle()">
                            <div class="card-header"><span class="card-title">üåô Nachttisch-Uhr</span></div>
                            <p class="text-muted text-sm">Gro√üe Uhr, OLED-Schwarz, Display bleibt an.</p>
                        </div>
                        <div class="card" onclick="app.modals.open('setAlarm')">
                            <div class="card-header"><span class="card-title">‚è∞ Wecker</span></div>
                            <div id="activeAlarmDisplay" class="text-muted text-sm">Kein Wecker gestellt.</div>
                        </div>

                        <div class="card" onclick="app.navigateTo('health')">
                            <div class="card-header"><span class="card-title">‚ù§Ô∏è Gesundheit</span></div>
                        </div>
                        <div class="card" onclick="app.navigateTo('finance')">
                            <div class="card-header"><span class="card-title">üí∂ Finanzen</span></div>
                        </div>
                        <!-- Explicit Drive Mode Button on Tools Page if needed -->
                        <div class="card" onclick="app.actions.toggleDriveMode()">
                            <div class="card-header"><span class="card-title">üöò Fahrt-Modus</span></div>
                        </div>
                    </div>
                </div>

                <!-- FINANCE VIEW -->
                <div id="view-finance" class="view-section hidden">
                    <div class="card-header">
                        <h1>Finanzen & Budget</h1>
                        <div style="display:flex; gap:10px;">
                            <button class="btn-secondary" onclick="app.finance.setBudget()"><i data-lucide="target"></i>
                                Budget</button>
                            <button class="btn-primary" onclick="app.modals.open('addExpense')"><i
                                    data-lucide="plus"></i> Ausgabe</button>
                        </div>
                    </div>

                    <!-- Summary Cards -->
                    <div class="dashboard-grid" style="margin-bottom:20px;">
                        <div class="card">
                            <div class="card-header">
                                <span class="card-title"><i data-lucide="calendar-days" class="text-primary"></i>
                                    Heute</span>
                            </div>
                            <div class="card-value" id="financeDay" style="color:var(--danger);">0.00‚Ç¨</div>
                        </div>

                        <div class="card">
                            <div class="card-header">
                                <span class="card-title"><i data-lucide="calendar-range" class="text-secondary"></i>
                                    Woche</span>
                            </div>
                            <div class="card-value" id="financeWeek" style="color:var(--danger);">0.00‚Ç¨</div>
                        </div>

                        <div class="card">
                            <div class="card-header">
                                <span class="card-title"><i data-lucide="calendar" class="text-accent"></i>
                                    Monat</span>
                            </div>
                            <div class="card-value" id="financeMonth" style="color:var(--danger);">0.00‚Ç¨</div>
                        </div>

                        <div class="card">
                            <div class="card-header">
                                <span class="card-title"><i data-lucide="calendar-check" class="text-success"></i>
                                    Jahr</span>
                            </div>
                            <div class="card-value" id="financeYear" style="color:var(--danger);">0.00‚Ç¨</div>
                        </div>
                    </div>

                    <!-- Budget Overview -->
                    <div class="dashboard-grid" style="margin-bottom:20px;">
                        <div class="card">
                            <h3><i data-lucide="pie-chart"></i> Budget √úbersicht</h3>
                            <canvas id="expenseChart" style="max-height:200px;"></canvas>
                        </div>

                        <div class="card">
                            <h3><i data-lucide="wallet"></i> Monatliches Budget</h3>
                            <div style="display:grid; grid-template-columns:1fr 1fr; gap:15px; margin-top:15px;">
                                <div>
                                    <div class="text-muted text-sm">Budget</div>
                                    <div style="font-size:1.5rem; font-weight:700;" id="financeBudget">2000.00‚Ç¨
                                    </div>
                                </div>
                                <div>
                                    <div class="text-muted text-sm">√úbrig</div>
                                    <div style="font-size:1.5rem; font-weight:700;" id="financeRemaining">0.00‚Ç¨
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- History -->
                    <div class="card" style="grid-column: span 2;">
                        <div class="card-header">
                            <span class="card-title"><i data-lucide="history"></i> Ausgaben Historie</span>
                            <button class="btn-small btn-primary" onclick="app.modals.open('addExpense')">
                                <i data-lucide="plus" size="16"></i> Neu
                            </button>
                        </div>
                        <div id="expenseHistory" style="margin-top:15px; display:flex; flex-direction:column; gap:8px;">
                        </div>
                    </div>
                </div>

                <!-- HEALTH VIEW -->
                <div id="view-health" class="view-section hidden">
                    <div class="card-header">
                        <h1>Gesundheit & Wohlbefinden</h1>
                        <button class="btn-primary" onclick="app.health.add()"><i data-lucide="plus"></i>
                            Eintrag</button>
                    </div>
                    <div class="dashboard-grid">
                        <!-- Water Intake -->
                        <div class="card">
                            <div class="card-header">
                                <span class="card-title"><i data-lucide="droplet" class="text-primary"></i>
                                    Wasser</span>
                                <button class="btn-small" onclick="app.health.setWaterGoal()" title="Ziel √§ndern">
                                    <i data-lucide="target" size="14"></i>
                                </button>
                            </div>
                            <div class="card-value" id="healthWaterToday">0L</div>
                            <div class="text-muted text-sm">Ziel: <span id="healthWaterGoal">2.5L</span></div>
                            <div class="habit-progress-container" style="margin-top: 10px;">
                                <div id="healthWaterProgress" class="habit-progress-bar" style="width: 0%"></div>
                            </div>
                            <button class="btn-primary" style="width:100%; margin-top:10px;"
                                onclick="app.health.addWater()">+ 0.25L</button>
                        </div>

                        <!-- Steps -->
                        <div class="card">
                            <div class="card-header">
                                <span class="card-title"><i data-lucide="footprints" class="text-success"></i>
                                    Schritte</span>
                            </div>
                            <div class="card-value" id="healthStepsToday">0</div>
                            <div class="text-muted text-sm">Ziel: 10,000</div>
                        </div>

                        <!-- Sleep -->
                        <div class="card">
                            <div class="card-header">
                                <span class="card-title"><i data-lucide="moon" class="text-accent"></i>
                                    Schlaf</span>
                            </div>
                            <div class="card-value" id="healthSleepToday">0h</div>
                            <div class="text-muted text-sm">Letzte Nacht</div>
                        </div>

                        <!-- Weight -->
                        <div class="card">
                            <div class="card-header">
                                <span class="card-title"><i data-lucide="activity" class="text-secondary"></i>
                                    Gewicht</span>
                            </div>
                            <div class="card-value" id="healthWeightLatest">--kg</div>
                            <div class="text-muted text-sm">Aktuell</div>
                        </div>

                        <!-- History -->
                        <div class="card" style="grid-column: span 2;">
                            <h3>Verlauf</h3>
                            <div id="healthHistory"
                                style="margin-top:10px; display:flex; flex-direction:column; gap:8px;">
                                <div class="text-muted text-sm">Keine Eintr√§ge vorhanden.</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- CONTACTS VIEW -->
                <div id="view-contacts" class="view-section hidden" style="max-width: 1000px; margin: 0 auto;">
                    <div class="card" style="padding:0; overflow:hidden;">
                        <!-- Header Section -->
                        <div
                            style="padding:30px; background:linear-gradient(135deg, rgba(59, 130, 246, 0.1), rgba(139, 92, 246, 0.1)); border-bottom: 1px solid rgba(255,255,255,0.05);">
                            <div
                                style="display:flex; justify-content:space-between; align-items:center; gap: 20px; flex-wrap: wrap;">
                                <div>
                                    <h1
                                        style="margin:0; font-size:2rem; background: linear-gradient(to right, #fff, var(--text-muted)); -webkit-background-clip: text; background-clip: text; -webkit-text-fill-color: transparent;">
                                        Kontakt Management</h1>
                                    <p class="text-muted" style="margin:5px 0 0 0;">Verwalte deine privaten und
                                        gesch√§ftlichen Kontakte.</p>
                                </div>
                                <div style="display:flex; gap:10px;">
                                    <button class="btn btn-secondary" onclick="app.contacts.importFromPhone()"><i
                                            data-lucide="smartphone"></i> Telefonbuch Import</button>
                                    <button class="btn btn-primary" onclick="app.modals.open('addContact')"><i
                                            data-lucide="plus"></i> Neu</button>
                                </div>
                            </div>
                        </div>

                        <!-- Category Tabs -->
                        <div
                            style="display:flex; gap:10px; padding:20px 25px; border-bottom:1px solid rgba(255,255,255,0.05); background:rgba(0,0,0,0.2);">
                            <button id="contactTabAll" class="btn btn-secondary"
                                style="background:var(--primary); color:white; border:none;"
                                onclick="app.contacts.filterContacts('all'); document.getElementById('contactTabAll').style.background='var(--primary)'; document.getElementById('contactTabPrivate').style.background=''; document.getElementById('contactTabBusiness').style.background='';">
                                <i data-lucide="users" size="16" style="margin-right:5px;"></i>Alle
                            </button>
                            <button id="contactTabPrivate" class="btn btn-secondary" style="border:none;"
                                onclick="app.contacts.filterContacts('private'); document.getElementById('contactTabPrivate').style.background='var(--primary)'; document.getElementById('contactTabAll').style.background=''; document.getElementById('contactTabBusiness').style.background='';">
                                <i data-lucide="user" size="16" style="margin-right:5px;"></i>Privat
                            </button>
                            <button id="contactTabBusiness" class="btn btn-secondary" style="border:none;"
                                onclick="app.contacts.filterContacts('business'); document.getElementById('contactTabBusiness').style.background='var(--primary)'; document.getElementById('contactTabAll').style.background=''; document.getElementById('contactTabPrivate').style.background='';">
                                <i data-lucide="briefcase" size="16" style="margin-right:5px;"></i>Business
                            </button>
                        </div>

                        <!-- Search & Content -->
                        <div style="padding:25px;">
                            <div style="display:grid; grid-template-columns: 1fr; gap:20px;">
                                <!-- Local Search -->
                                <div style="position:relative;">
                                    <input type="text" placeholder="Kontakte filtern (Name, Telefon, Email...)"
                                        oninput="app.contacts.search(this.value)"
                                        style="width:100%; padding:15px 15px 15px 45px; border-radius:18px; border:1px solid rgba(255,255,255,0.08); background:rgba(255,255,255,0.02); color:white; font-size:1rem; outline:none; transition: all 0.3s;"
                                        onfocus="this.style.borderColor='var(--primary)'; this.style.background='rgba(59, 130, 246, 0.05)'"
                                        onblur="this.style.borderColor='rgba(255,255,255,0.08)'; this.style.background='rgba(255,255,255,0.02)'">
                                    <i data-lucide="search" size="20"
                                        style="position:absolute; left:15px; top:15px; opacity:0.3;"></i>
                                </div>

                                <!-- Contact List -->
                                <div id="contactsList" style="min-height: 200px;">
                                    <!-- Contacts rendered as a compact list -->
                                </div>

                                <!-- Global Google Search -->
                                <div
                                    style="margin-top:20px; padding:20px; background:rgba(0,0,0,0.2); border-radius:20px; border:1px solid rgba(59, 130, 246, 0.1);">
                                    <div
                                        style="font-size:0.7rem; font-weight:800; color:var(--primary); text-transform:uppercase; margin-bottom:15px; letter-spacing:1px;">
                                        <i data-lucide="globe" size="12"></i> Google Business Suche
                                    </div>
                                    <div style="display:flex; gap:10px;">
                                        <input type="text" id="contactViewSearch"
                                            placeholder="Google Suche: 'Zahnarzt Berlin'..."
                                            onkeypress="if(event.key==='Enter') app.businessSearch.perform(this.value)"
                                            style="flex:1; padding:12px 15px; border-radius:12px; border:1px solid rgba(255,255,255,0.1); background:rgba(0,0,0,0.3); color:white;">
                                        <button class="btn btn-primary"
                                            onclick="app.businessSearch.perform(document.getElementById('contactViewSearch').value)"><i
                                                data-lucide="search"></i></button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- DRIVE VIEW (Overlay style) -->
                <div id="view-drive" class="view-section hidden"
                    style="position:fixed; inset:0; z-index:9999; background:#000; text-align:center; display:flex; flex-direction:column; padding-top: env(safe-area-inset-top); padding-bottom: env(safe-area-inset-bottom);">

                    <!-- Header with Close & Clock (Compact) -->
                    <div style="padding: 10px 20px; display:flex; justify-content:space-between; align-items:center;">
                        <div style="text-align:left;">
                            <div style="font-size: 2.2rem; font-weight: 800; line-height:1; letter-spacing: -1px;"
                                id="driveClock">--:--</div>
                            <div class="text-muted" id="driveDate" style="font-size: 0.9rem;">Lade Datum...</div>
                        </div>
                        <button class="nav-drive-close" onclick="app.actions.toggleDriveMode()">
                            <i data-lucide="x" size="24"></i>
                        </button>
                    </div>

                    <!-- Location Status (Compact) -->
                    <div id="driveLocationStatus" style="padding: 0 20px; text-align: left; margin-bottom: 5px;">
                        <div
                            style="display:flex; align-items:center; gap:8px; background:rgba(34,197,94,0.1); padding:8px 10px; border-radius:12px; border:1px solid rgba(34,197,94,0.2);">
                            <div style="background:rgba(34,197,94,0.2); padding:6px; border-radius:50%; display:flex;">
                                <i data-lucide="navigation" class="text-success" size="16"></i>
                            </div>
                            <div style="flex:1; min-width: 0;">
                                <div class="text-xs text-muted"
                                    style="text-transform:uppercase; letter-spacing:0.5px; font-size: 0.65rem;">
                                    Standort</div>
                                <div id="currentLocationText"
                                    style="font-weight:bold; font-size:0.85rem; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">
                                    Suche
                                    GPS...
                                </div>
                            </div>
                            <button class="btn-small" onclick="app.drive.askLocation()"
                                style="width: auto; padding: 0 10px; font-size: 0.75rem; height: 28px;">√Ñndern</button>
                        </div>
                    </div>

                    <!-- Map Container (Collapsible) -->
                    <div style="padding: 0 20px; margin-bottom: 15px;">
                        <button
                            onclick="document.getElementById('driveMapContainer').classList.toggle('hidden'); this.querySelector('span').textContent = document.getElementById('driveMapContainer').classList.contains('hidden') ? 'Karte anzeigen' : 'Karte ausblenden';"
                            style="width: 100%; padding: 10px; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.2); border-radius: 12px; color: white; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 8px; font-size: 0.9rem;">
                            <i data-lucide="map" size="16"></i>
                            <span>Karte ausblenden</span>
                        </button>
                    </div>
                    <div id="driveMapContainer"
                        style="padding: 0 20px; text-align: left; margin-bottom: 20px; height: 150px;">
                        <div id="driveMap"
                            style="width: 100%; height: 100%; border-radius: 16px; border: 1px solid rgba(255,255,255,0.2); position: relative; z-index: 1;">
                        </div>
                    </div>

                    <!-- Route / Timeline -->
                    <div
                        style="flex:1; overflow-y:auto; padding: 10px 20px; -webkit-overflow-scrolling: touch; scroll-behavior: smooth;">
                        <h3
                            style="text-align:left; margin-bottom:20px; display:flex; align-items:center; gap:10px; font-size:1.6rem; font-weight: 800; color: white;">
                            <i data-lucide="map" class="text-primary"></i> Deine Route Heute
                        </h3>
                        <div id="driveRouteList" style="display:flex; flex-direction:column; gap:0;">
                            <!-- Injected via JS -->
                            <div class="text-muted">Lade Route...</div>
                        </div>
                    </div>

                    <!-- Bottom Actions -->
                    <div
                        style="padding: 20px; background: linear-gradient(to top, #000 85%, transparent); padding-bottom: max(20px, env(safe-area-inset-bottom));">
                        <button class="btn-primary"
                            style="width:100%; padding:22px; font-size:1.3rem; border-radius: 16px; box-shadow: 0 4px 20px rgba(59, 130, 246, 0.4);"
                            onclick="app.drive.openNavigation()">
                            <i data-lucide="map-pin"></i> Navigation starten
                        </button>
                        <div style="display:flex; gap:12px; margin-top:12px;">
                            <button class="btn-secondary"
                                style="flex:1; padding:16px; border-radius: 12px; font-size:1.1rem;"
                                onclick="app.voice.startGlobal()"><i data-lucide="mic"></i> Sprachbefehl</button>
                            <button class="btn-secondary"
                                style="flex:1; padding:16px; border-radius: 12px; font-size:1.1rem;"
                                onclick="app.drive.refresh()"><i data-lucide="refresh-cw"></i> Neu laden</button>
                        </div>
                    </div>
                </div>

                <!-- SETTINGS VIEW -->
                <div id="view-settings" class="view-section hidden">
                    <div class="card-header">
                        <h1>Einstellungen</h1>
                    </div>
                    <div class="dashboard-grid">

                        <div class="card" style="grid-column: span 2;">
                            <h3><i data-lucide="sparkles" class="text-accent"></i> AI Assistent Konfiguration</h3>
                            <p class="text-muted text-sm" style="margin-bottom: 1.5rem;">W√§hle deinen bevorzugten AI
                                Provider und gib deinen API Key ein.</p>

                            <button class="btn btn-secondary" style="width:100%; margin-bottom:10px;"
                                onclick="app.notifications.requestPermission()">
                                <i data-lucide="bell-ring"></i> Benachrichtigungen Aktivieren
                            </button>

                            <button class="btn btn-secondary"
                                style="width:100%; margin-bottom:20px; border: 1px dashed var(--primary); background: rgba(59, 130, 246, 0.05);"
                                onclick="setTimeout(() => app.notifications.send('üîî Test Alarm', 'Das System funktioniert! Du siehst diesen Alarm im Hintergrund.', true), 5000); alert('Test-Alarm startet in 5 Sekunden. Minimiere JETZT die App oder sperre das Handy!');">
                                <i data-lucide="play"></i> Hintergrund-Test (5 Sek. Verz√∂gerung)
                            </button>

                            <div class="form-group">
                                <label class="form-label">Provider</label>
                                <select id="aiProviderSelect" class="form-input"
                                    onchange="app.settings.updateAIProvider()">
                                    <option value="openai">OpenAI (GPT-4o/o1)</option>
                                    <option value="grok">xAI Grok</option>
                                    <option value="gemini">Google Gemini</option>
                                </select>
                            </div>

                            <div id="openaiConfig" class="ai-config-fields">
                                <div class="form-group">
                                    <label class="form-label">OpenAI API Key</label>
                                    <input type="password" id="openaiKeyInput" class="form-input" placeholder="sk-..."
                                        onchange="app.settings.saveAIConfig()">
                                </div>
                            </div>

                            <div id="grokConfig" class="ai-config-fields hidden">
                                <div class="form-group">
                                    <label class="form-label">xAI Grok API Key</label>
                                    <input type="password" id="grokKeyInput" class="form-input" placeholder="xai-..."
                                        onchange="app.settings.saveAIConfig()">
                                </div>
                            </div>

                            <div id="geminiConfig" class="ai-config-fields hidden">
                                <div class="form-group">
                                    <label class="form-label">Google Gemini API Key</label>
                                    <input type="password" id="geminiKeyInput" class="form-input" placeholder="AIza..."
                                        onchange="app.settings.saveAIConfig()">
                                </div>
                            </div>

                            <button class="btn btn-primary" style="width: 100%; margin-top: 10px;"
                                onclick="app.settings.saveAIConfig()">
                                <i data-lucide="save"></i> Einstellungen Speichern
                            </button>
                        </div>

                        <div class="card">
                            <h3><i data-lucide="layout"></i> Darstellung</h3>
                            <div class="form-group">
                                <label class="form-label">Dashboard Layout</label>
                                <select id="dashboardLayoutSelect" class="form-input"
                                    onchange="app.settings.saveLayout()">
                                    <option value="double">Standard (2 Spalten / Fenster)</option>
                                    <option value="single">√úbersicht (1 Spalte / Einzeilig)</option>
                                </select>
                            </div>
                            <div class="form-group" style="margin-top: 15px;">
                                <label class="form-label">Voice-Button Icon</label>
                                <select id="voiceIconModeSelect" class="form-input"
                                    onchange="app.settings.saveVoiceIconMode()">
                                    <option value="logo">TaskForce Logo (Blitz)</option>
                                    <option value="mic">Standard Mikrofon</option>
                                </select>
                            </div>
                            <div class="form-group" style="margin-top: 15px;">
                                <label class="form-label">Alarm-Animation (Dringend)</label>
                                <select id="blinkStyleSelect" class="form-input"
                                    onchange="app.settings.saveBlinkStyle()">
                                    <option value="standard">Standard (Pulsieren)</option>
                                    <option value="flash">Blitzlicht (Strobe)</option>
                                    <option value="neon">Neon Glow</option>
                                    <option value="shake">Erdbeben (R√ºtteln)</option>
                                    <option value="extreme">üî• Extrem (Kombination)</option>
                                    <option value="rainbow">üåà Regenbogen</option>
                                </select>
                                <p class="text-muted text-xs" style="margin-top: 8px;">
                                    W√§hle, wie dringend Termine blinken sollen. "Extrem" und "Regenbogen" sind besonders
                                    auff√§llig!
                                </p>
                            </div>
                            <div class="form-group" style="margin-top: 15px;">
                                <label class="form-label">‚è∞ Termin-Voralarm</label>
                                <select id="eventReminderSelect" class="form-input"
                                    onchange="app.settings.saveEventReminder()">
                                    <option value="15">15 Minuten vorher</option>
                                    <option value="30">30 Minuten vorher</option>
                                    <option value="60" selected>1 Stunde vorher</option>
                                    <option value="120">2 Stunden vorher</option>
                                </select>
                                <p class="text-muted text-xs" style="margin-top: 8px;">
                                    Du erh√§ltst automatisch eine Benachrichtigung vor jedem Termin.
                                </p>
                            </div>
                        </div>

                        <!-- Firebase JS SDKs -->
                        <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
                        <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>

                        <div class="card" style="border: 1px solid var(--accent);">
                            <h3><i data-lucide="flame"></i> Team Sync (Firebase)</h3>
                            <p class="text-muted text-sm" style="margin-bottom:15px;">
                                Verbinde dich mit deiner <b>Google Firebase</b> Datenbank.
                                <br>Kopiere dein Konfigurations-Objekt (JSON) hier rein.
                            </p>
                            <div class="form-group">
                                <label class="form-label">Firebase Config (JSON)</label>
                                <textarea id="firebaseConfigInput" class="form-input" rows="6"
                                    placeholder='{ "apiKey": "...", "authDomain": "...", "projectId": "..." }'
                                    onchange="app.settings.saveCloudConfig()"></textarea>
                            </div>
                            <div
                                style="display:flex; justify-content:space-between; align-items:center; margin-top:10px;">
                                <div id="syncStatus" class="text-sm text-muted">üî¥ Nicht verbunden</div>
                                <button class="btn btn-primary" onclick="app.cloud.sync(true)"><i
                                        data-lucide="refresh-cw"></i> Jetzt Syncen</button>
                            </div>
                        </div>

                        <div class="card">
                            <h3><i data-lucide="user"></i> Profil & Team</h3>

                            <div id="settingsTeamInfo">
                                <!-- Injected by app.js: Team Name, Password Change -->
                            </div>

                            <div class="form-group">
                                <label class="form-label">Dein Name</label>
                                <input type="text" id="settingsUserName" class="form-input"
                                    onchange="app.settings.saveProfile()">
                            </div>
                            <button class="btn btn-danger" style="width: 100%; margin-top: 10px;"
                                onclick="app.settings.resetApp()">
                                <i data-lucide="trash-2"></i> Alles l√∂schen
                            </button>
                        </div>
                    </div>
                </div>

            </div>

    </div>

    </main>

    <!-- Mobile Bottom Nav -->
    <nav class="mobile-nav">
        <button class="nav-item-mobile active" data-page="dashboard"><i data-lucide="home"></i></button>
        <button class="nav-item-mobile" data-page="tasks"><i data-lucide="check-square"></i></button>

        <!-- Center Voice Module -->
        <div class="nav-voice-center" onclick="app.voice.startGlobal()" title="Sprachbefehl">
            <div class="voice-inner" id="voiceButtonInner">
                <i data-lucide="mic" id="voiceMicIcon" size="24" class="hidden"></i>
                <i data-lucide="zap" id="voiceLogoIcon" size="24" style="color: #000;"></i>
            </div>
        </div>

        <button class="nav-item-mobile" data-page="calendar"><i data-lucide="calendar"></i></button>
        <button class="nav-item-mobile" data-page="tools"><i data-lucide="grid"></i></button>
    </nav>
    </div>

    <!-- NIGHTSTAND OVERLAY -->
    <div id="view-nightstand" class="hidden">
        <div class="night-clock" id="nightClock">00:00</div>
        <div class="night-date" id="nightDate">Montag, 1. Jan</div>
        <div class="night-alarm hidden" id="nightAlarmDisplay"><i data-lucide="alarm-clock"></i> <span>07:00</span>
        </div>
        <button class="wake-lock-btn" onclick="app.nightstand.toggle()">Schlie√üen & Sleep</button>
    </div>

    <!-- MODALS -->
    <div id="modalOverlay" class="hidden"
        style="position:fixed; inset:0; background:rgba(0,0,0,0.8); backdrop-filter:blur(5px); z-index:200; display:flex; align-items:center; justify-content:center;">
        <div id="modalContent" class="card"
            style="width:90%; max-width:500px; background: #0f172a; border: 1px solid var(--border);">
            <!-- Dynamic Injection -->
        </div>
    </div>



    <script src="app.js"></script>
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('./sw.js')
                    .then(reg => console.log('Service Worker aktiviert ‚úÖ', reg))
                    .catch(err => console.error('Service Worker Fehler ‚ùå', err));
            });
        }
    </script>
    <style>
        /* Extra inline styles */
        .action-btn-tile {
            background: var(--bg-surface);
            border: 1px solid var(--border);
            border-radius: var(--radius-md);
            padding: 1rem;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
            cursor: pointer;
            transition: var(--transition-fast);
        }

        .action-btn-tile:hover {
            background: var(--bg-surface-hover);
            transform: translateY(-2px);
        }

        .tile-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            margin-bottom: 5px;
        }

        .bg-primary {
            background: var(--primary);
        }

        .bg-danger {
            background: var(--danger);
            box-shadow: 0 0 10px rgba(239, 68, 68, 0.4);
        }

        .bg-accent {
            background: var(--accent);
            box-shadow: 0 0 10px rgba(139, 92, 246, 0.4);
        }

        .bg-success {
            background: var(--success);
        }

        .task-item-preview,
        .task-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 10px;
            padding: 15px;
            border-bottom: 1px solid var(--border);
            background: rgba(255, 255, 255, 0.03);
            border-radius: 8px;
            margin-bottom: 5px;
        }


        .form-group {
            margin-bottom: 15px;
        }

        .form-label {
            display: block;
            margin-bottom: 5px;
            color: var(--text-muted);
            font-size: 0.9rem;
        }

        .form-input {
            width: 100%;
            padding: 12px;
            border-radius: 8px;
            border: 1px solid var(--border);
            background: rgba(0, 0, 0, 0.3);
            color: white;
            font-size: 1rem;
        }
    </style>
</body>

</html>